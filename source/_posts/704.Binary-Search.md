---
title: 704.Binary-Search 二分查找
date: 2023-04-24 14:34:35
tags:
---

# 题目

链接：https://leetcode.cn/problems/binary-search/

给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。

You must write an algorithm with `O(log n)` runtime complexity.

示例1：

```
输入: nums = [-1,0,3,5,9,12], target = 9     
输出: 4       
解释: 9 出现在 nums 中并且下标为 4 
```

示例2：

```
输入: nums = [-1,0,3,5,9,12], target = 2     
输出: -1        
解释: 2 不存在 nums 中因此返回 -1    
```

<!--more-->

提示：

- 1 <= nums.length <= 104
- -104 < nums[i], target < 104
- All the integers in nums are unique.
- nums is sorted in ascending orde



# 解法

时间复杂度有要求，不能用简单的遍历来解题。

想到二分查找算法，易错点在于二分查找算法的边界条件不好判断。

```python
class Solution:
    def search(self, nums: List[int], target: int) -> int:

        # 左闭右闭区间
        left,right = 0 , len(nums)-1

        while left <= right:
            # python里面 //是整数除法 /是浮点数除法
            middle = left + (right-left)//2

            if nums[middle] > target:
                # nums[middle]已经不可能是target了，根据左闭右闭区间，下一个右边界是middle-1
                right = middle - 1  # target在左区间，所以下一次就是[left,middle-1]
            elif nums[middle] < target:
                left = middle + 1
            else:
                return middle  # 在数组中找到了目标值，返回此时的下标
        
        return -1  # 没找到目标值，返回-1
```



# 解题经验

使用二分算法的前提条件：

- 数组是**有序**数组
- 数组中没有重复元素（有重复元素，二分查找的返回的下标就不唯一了）



**循环不变量原则**

二分算法的区间边界经常写错，是因为对区间边界理解混乱，只要坚持在区间边界保持不变量，算法就很容易写对了，而且不需要死记硬背。

怎么保持区间的不变量呢？

在每一次while循环中，处理边界都要根据区间的定义来操作。

比如说一个左闭右闭区间，[1,1]就是合法的；对于一个左闭右开区间，[1,1)就是不合法的，在每次需要变动区间时，看清左右边界条件，保证不多循环，也不落下一个元素。



# Python语言

python里面 //是整数除法 /是浮点数除法
